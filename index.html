<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=768, initial-scale=1">
<link rel="stylesheet" href="static/vendor/prism.css">
<link rel="stylesheet" href="static/index.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
<title>p5.js-widget</title>

<a class="github-fork-ribbon" href="https://github.com/toolness/p5.js-widget" title="Fork me on GitHub">Fork me on GitHub</a>

<h1>p5.js-widget</h1>
<p>
  This is a reusable widget that makes it easier to embed editable
  <a href="http://p5js.org">p5.js</a> sketches in blog posts,
  interactive curricula, and other places.
</p>
<h2>Quick Start</h2>

<p>
  To use this widget, add the following script to your page:
</p>

<pre><code class="language-markup" id="script-tag-example"></code></pre>

<p>
  The script will then automatically transform all script tags of
  type <code>text/p5</code> on the page into editable widgets, like so:
</p>

<script type="text/p5">
function setup() {
  createCanvas(100, 100);
}

function draw() {
  background(255, 0, 200);
}
</script>

<h2>Autoplay</h2>

<p>
  Note that by default, the sketch will <em>not</em> start playing
  automatically. This can be changed via the <code>data-autoplay</code>
  attribute like so:
</p>

<script type="text/p5" data-autoplay>
function setup() {
  createCanvas(100, 100);
  background(255, 0, 200);

  // Don't slow down the whole page.
  noLoop();
}
</script>

<h2>Error Handling</h2>

<p>
  The widget is intended to be resilient against various types of
  user error. In the future, we'd like to improve the widget to
  provide more
  <a href="http://processing.toolness.org">friendly errors</a>.
</p>

<p>
  Here's what happens when the sketch has runtime errors. Note that the
  exact description of the error is browser-specific and can't be changed.
</p>

<script type="text/p5" data-autoplay data-hide-sourcecode>
function setup() {
  // Reference a non-existent variable...
  KABOOM
}
</script>

<p>
  Here's what happens when the sketch has syntax errors (which prevent the
  sketch from running entirely). Currently, the syntax errors are
  browser-specific, though this may change in the future.
</p>

<script type="text/p5" data-autoplay data-hide-sourcecode>
// Syntax error (no parentheses after function name)
function setup {
}
</script>

<p>
  Here's what happens when the sketch is in a loop for more than
  one second (which is a good indication that the user has accidentally
  written an infinite loop). The message is <em>not</em> browser-specific.
</p>

<script type="text/p5" data-hide-sourcecode>
function setup() {
  // Infinite loop!
  while (true) {}
}
</script>

<h2>Resizing</h2>

<p>
  The height of the widget (and consequently the sketch preview pane too)
  defaults to <span id="default-height"></span>px and can be changed
  via the <code>data-height</code> attribute like so:
</p>

<script type="text/p5" data-height="100"></script>

<p>
  The width of the widget is always set to the full width of its
  container element.
</p>

<p>
  The width of the sketch preview pane can be set via the
  <code>data-preview-width</code> attribute like so:
</p>

<script type="text/p5" data-autoplay data-preview-width="400">
function setup() {
  createCanvas(300, 100);
  background(255, 0, 200);
  noLoop();
}
</script>

<script src="static/vendor/jquery.js"></script>
<script src="p5-widget.js" data-manual></script>
<script src="static/vendor/prism.js" data-manual></script>
<script src="static/index.js"></script>
