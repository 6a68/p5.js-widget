{"version":3,"sources":["webpack:///p5-widget.js","webpack:///webpack/bootstrap fd62be6c53020f033a31","webpack:///./lib/p5-widget.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","getMyBaseURL","url","slice","MY_FILENAME","length","getMyScriptEl","document","currentScript","querySelectorAll","replaceScriptWithWidget","el","iframe","createElement","height","parseInt","getAttribute","previewWidth","p5version","autoplay","hasAttribute","qsArgs","encodeURIComponent","textContent","style","IFRAME_STYLE","isNaN","DEFAULT_HEIGHT","push","myBaseURL","IFRAME_FILENAME","join","setAttribute","parentNode","replaceChild","replaceAllScriptsWithWidget","scripts","forEach","myScriptEl","src","autoload","readyState","window","addEventListener","baseURL","replaceScript","replaceAll","defaults"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMM,SAASI,EAAQD,GE/BvB,QAAAQ,GAAsBC,GACpB,MAAOA,GAAIC,MAAM,GAAIC,EAAYC,QAGnC,QAAAC,KACE,MACEC,UAASC,eACTD,SAASE,iBAAiB,gBAAkBL,EAAc,MAAM,GAIpE,QAAAM,GAAiCC,GAC/B,GAKIT,GALAU,EAASL,SAASM,cAAc,UAChCC,EAASC,SAASJ,EAAGK,aAAa,gBAClCC,EAAeF,SAASJ,EAAGK,aAAa,uBACxCE,EAAYP,EAAGK,aAAa,mBAC5BG,EAAWR,EAAGS,aAAa,iBAE3BC,GAAU,UAAYC,mBAAmBX,EAAGY,cAC5CC,EAAQC,EAAatB,OAErBuB,OAAMZ,KAASA,EAASa,IAEvBD,MAAMT,IAAiBA,GAAgB,GAC1CI,EAAOO,KAAK,gBAAkBX,GAG5BC,GACFG,EAAOO,KAAK,aAAeN,mBAAmBJ,IAG5CC,GACFE,EAAOO,KAAK,eAGdJ,EAAMI,KAAK,eAAiBd,EAAS,MACrCZ,EAAM2B,EAAYC,EAAkB,IAAMT,EAAOU,KAAK,KACtDnB,EAAOoB,aAAa,MAAO9B,GAC3BU,EAAOoB,aAAa,QAASR,EAAMO,KAAK,OAExCpB,EAAGsB,WAAWC,aAAatB,EAAQD,GAGrC,QAAAwB,KACE,GAAIC,GAAU7B,SAASE,iBAAiB,6BAErCN,MAAMN,KAAKuC,GAASC,QAAQ3B,GA3DjC,GAAMN,GAAc,eACd0B,EAAkB,iBAClBL,GACJ,cACA,4BACA,0BAEIE,EAAiB,IAEnBW,EAAahC,IACbuB,EAAY5B,EAAaqC,EAAWC,KACpCC,GAAYF,EAAWlB,aAAa,cAmDpCoB,KAC0B,aAAxBjC,SAASkC,WACXN,IAEAO,OAAOC,iBAAiB,OAAQR,GAA6B,IAIjEO,OAAiB,UACfE,QAASf,EACT3B,IAAK2B,EAAYzB,EACjByC,cAAenC,EACfoC,WAAYX,EACZY,UACEjC,OAAQa","file":"p5-widget.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\tvar MY_FILENAME = 'p5-widget.js';\r\n\tvar IFRAME_FILENAME = 'p5-widget.html';\r\n\tvar IFRAME_STYLE = [\r\n\t    'width: 100%',\r\n\t    'border: 1px solid #ec245e',\r\n\t    'box-sizing: border-box'\r\n\t];\r\n\tvar DEFAULT_HEIGHT = 300;\r\n\tvar myScriptEl = getMyScriptEl();\r\n\tvar myBaseURL = getMyBaseURL(myScriptEl.src);\r\n\tvar autoload = !myScriptEl.hasAttribute('data-manual');\r\n\tfunction getMyBaseURL(url) {\r\n\t    return url.slice(0, -MY_FILENAME.length);\r\n\t}\r\n\tfunction getMyScriptEl() {\r\n\t    return (document.currentScript ||\r\n\t        document.querySelectorAll(\"script[src$='\" + MY_FILENAME + \"']\")[0]);\r\n\t}\r\n\tfunction replaceScriptWithWidget(el) {\r\n\t    var iframe = document.createElement('iframe');\r\n\t    var height = parseInt(el.getAttribute('data-height'));\r\n\t    var previewWidth = parseInt(el.getAttribute('data-preview-width'));\r\n\t    var p5version = el.getAttribute('data-p5-version');\r\n\t    var autoplay = el.hasAttribute('data-autoplay');\r\n\t    var url;\r\n\t    var qsArgs = ['sketch=' + encodeURIComponent(el.textContent)];\r\n\t    var style = IFRAME_STYLE.slice();\r\n\t    if (isNaN(height))\r\n\t        height = DEFAULT_HEIGHT;\r\n\t    if (!isNaN(previewWidth) && previewWidth >= 0) {\r\n\t        qsArgs.push('previewWidth=' + previewWidth);\r\n\t    }\r\n\t    if (p5version) {\r\n\t        qsArgs.push('p5version=' + encodeURIComponent(p5version));\r\n\t    }\r\n\t    if (autoplay) {\r\n\t        qsArgs.push('autoplay=on');\r\n\t    }\r\n\t    style.push('min-height: ' + height + 'px');\r\n\t    url = myBaseURL + IFRAME_FILENAME + '?' + qsArgs.join('&');\r\n\t    iframe.setAttribute('src', url);\r\n\t    iframe.setAttribute('style', style.join('; '));\r\n\t    el.parentNode.replaceChild(iframe, el);\r\n\t}\r\n\tfunction replaceAllScriptsWithWidget() {\r\n\t    var scripts = document.querySelectorAll(\"script[type='text/p5']\");\r\n\t    [].slice.call(scripts).forEach(replaceScriptWithWidget);\r\n\t}\r\n\tif (autoload) {\r\n\t    if (document.readyState === 'complete') {\r\n\t        replaceAllScriptsWithWidget();\r\n\t    }\r\n\t    else {\r\n\t        window.addEventListener('load', replaceAllScriptsWithWidget, false);\r\n\t    }\r\n\t}\r\n\twindow['p5Widget'] = {\r\n\t    baseURL: myBaseURL,\r\n\t    url: myBaseURL + MY_FILENAME,\r\n\t    replaceScript: replaceScriptWithWidget,\r\n\t    replaceAll: replaceAllScriptsWithWidget,\r\n\t    defaults: {\r\n\t        height: DEFAULT_HEIGHT\r\n\t    }\r\n\t};\r\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** p5-widget.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fd62be6c53020f033a31\n **/","const MY_FILENAME = 'p5-widget.js';\r\nconst IFRAME_FILENAME = 'p5-widget.html';\r\nconst IFRAME_STYLE = [\r\n  'width: 100%',\r\n  'border: 1px solid #ec245e',\r\n  'box-sizing: border-box'\r\n];\r\nconst DEFAULT_HEIGHT = 300;\r\n\r\nlet myScriptEl = getMyScriptEl() as HTMLScriptElement;\r\nlet myBaseURL = getMyBaseURL(myScriptEl.src);\r\nlet autoload = !myScriptEl.hasAttribute('data-manual');\r\n\r\nfunction getMyBaseURL(url) {\r\n  return url.slice(0, -MY_FILENAME.length);\r\n}\r\n\r\nfunction getMyScriptEl() {\r\n  return (\r\n    document.currentScript ||\r\n    document.querySelectorAll(\"script[src$='\" + MY_FILENAME + \"']\")[0]\r\n  );\r\n}\r\n\r\nfunction replaceScriptWithWidget(el) {\r\n  let iframe = document.createElement('iframe');\r\n  let height = parseInt(el.getAttribute('data-height'));\r\n  let previewWidth = parseInt(el.getAttribute('data-preview-width'));\r\n  let p5version = el.getAttribute('data-p5-version');\r\n  let autoplay = el.hasAttribute('data-autoplay');\r\n  let url;\r\n  let qsArgs = ['sketch=' + encodeURIComponent(el.textContent)];\r\n  let style = IFRAME_STYLE.slice();\r\n\r\n  if (isNaN(height)) height = DEFAULT_HEIGHT;\r\n\r\n  if (!isNaN(previewWidth) && previewWidth >= 0) {\r\n    qsArgs.push('previewWidth=' + previewWidth);\r\n  }\r\n\r\n  if (p5version) {\r\n    qsArgs.push('p5version=' + encodeURIComponent(p5version));\r\n  }\r\n\r\n  if (autoplay) {\r\n    qsArgs.push('autoplay=on');\r\n  }\r\n\r\n  style.push('min-height: ' + height + 'px');\r\n  url = myBaseURL + IFRAME_FILENAME + '?' + qsArgs.join('&');\r\n  iframe.setAttribute('src', url);\r\n  iframe.setAttribute('style', style.join('; '));\r\n\r\n  el.parentNode.replaceChild(iframe, el);\r\n}\r\n\r\nfunction replaceAllScriptsWithWidget() {\r\n  let scripts = document.querySelectorAll(\"script[type='text/p5']\");\r\n\r\n  [].slice.call(scripts).forEach(replaceScriptWithWidget);\r\n}\r\n\r\nif (autoload) {\r\n  if (document.readyState === 'complete') {\r\n    replaceAllScriptsWithWidget();\r\n  } else {\r\n    window.addEventListener('load', replaceAllScriptsWithWidget, false);\r\n  }\r\n}\r\n\r\nwindow['p5Widget'] = {\r\n  baseURL: myBaseURL,\r\n  url: myBaseURL + MY_FILENAME,\r\n  replaceScript: replaceScriptWithWidget,\r\n  replaceAll: replaceAllScriptsWithWidget,\r\n  defaults: {\r\n    height: DEFAULT_HEIGHT\r\n  }\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/p5-widget.ts\n **/"],"sourceRoot":""}