{"version":3,"sources":["webpack:///webpack/bootstrap fd62be6c53020f033a31","webpack:///./lib/p5-widget.ts"],"names":[],"mappings":"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","file":"p5-widget.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fd62be6c53020f033a31\n **/","const MY_FILENAME = 'p5-widget.js';\r\nconst IFRAME_FILENAME = 'p5-widget.html';\r\nconst IFRAME_STYLE = [\r\n  'width: 100%',\r\n  'border: 1px solid #ec245e',\r\n  'box-sizing: border-box'\r\n];\r\nconst DEFAULT_HEIGHT = 300;\r\n\r\nlet myScriptEl = getMyScriptEl() as HTMLScriptElement;\r\nlet myBaseURL = getMyBaseURL(myScriptEl.src);\r\nlet autoload = !myScriptEl.hasAttribute('data-manual');\r\n\r\nfunction getMyBaseURL(url) {\r\n  return url.slice(0, -MY_FILENAME.length);\r\n}\r\n\r\nfunction getMyScriptEl() {\r\n  return (\r\n    document.currentScript ||\r\n    document.querySelectorAll(\"script[src$='\" + MY_FILENAME + \"']\")[0]\r\n  );\r\n}\r\n\r\nfunction replaceScriptWithWidget(el) {\r\n  let iframe = document.createElement('iframe');\r\n  let height = parseInt(el.getAttribute('data-height'));\r\n  let previewWidth = parseInt(el.getAttribute('data-preview-width'));\r\n  let p5version = el.getAttribute('data-p5-version');\r\n  let autoplay = el.hasAttribute('data-autoplay');\r\n  let url;\r\n  let qsArgs = ['sketch=' + encodeURIComponent(el.textContent)];\r\n  let style = IFRAME_STYLE.slice();\r\n\r\n  if (isNaN(height)) height = DEFAULT_HEIGHT;\r\n\r\n  if (!isNaN(previewWidth) && previewWidth >= 0) {\r\n    qsArgs.push('previewWidth=' + previewWidth);\r\n  }\r\n\r\n  if (p5version) {\r\n    qsArgs.push('p5version=' + encodeURIComponent(p5version));\r\n  }\r\n\r\n  if (autoplay) {\r\n    qsArgs.push('autoplay=on');\r\n  }\r\n\r\n  style.push('min-height: ' + height + 'px');\r\n  url = myBaseURL + IFRAME_FILENAME + '?' + qsArgs.join('&');\r\n  iframe.setAttribute('src', url);\r\n  iframe.setAttribute('style', style.join('; '));\r\n\r\n  el.parentNode.replaceChild(iframe, el);\r\n}\r\n\r\nfunction replaceAllScriptsWithWidget() {\r\n  let scripts = document.querySelectorAll(\"script[type='text/p5']\");\r\n\r\n  [].slice.call(scripts).forEach(replaceScriptWithWidget);\r\n}\r\n\r\nif (autoload) {\r\n  if (document.readyState === 'complete') {\r\n    replaceAllScriptsWithWidget();\r\n  } else {\r\n    window.addEventListener('load', replaceAllScriptsWithWidget, false);\r\n  }\r\n}\r\n\r\nwindow['p5Widget'] = {\r\n  baseURL: myBaseURL,\r\n  url: myBaseURL + MY_FILENAME,\r\n  replaceScript: replaceScriptWithWidget,\r\n  replaceAll: replaceAllScriptsWithWidget,\r\n  defaults: {\r\n    height: DEFAULT_HEIGHT\r\n  }\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/p5-widget.ts\n **/"],"sourceRoot":""}